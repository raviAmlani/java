/*1359042610,178142495*/

if (self.CavalryLogger) { CavalryLogger.start_js(["F50l5"]); }

function HackerCupLastSubmitController(a,b){copyProperties(this,{elem:$(a),problem_id:b});var c=this.update.bind(this),d=HackerCupConst.SUCCESSFUL_UPLOAD;Arbiter.subscribe(d,c);this.update();}copyProperties(HackerCupLastSubmitController.prototype,{update:function(){var a=new AsyncRequest().setURI('/hackercup/ajax/last_submission.php').setData({problem_id:this.problem_id}).send();}});
function HackerCupTimerController(a,b,c,d,e,f,g){copyProperties(this,{elem:$(a),time_remaining:b,refid:d,expired:e,label:f,reload_when_expired:g});this.started=false;this.was_unexpired_once=false;var h=this._onInform.bind(this),i=HackerCupConst.START_TIMER;Arbiter.subscribe(i,h);if(c)this.start();}copyProperties(HackerCupTimerController.prototype,{displayDiv:null,elem:null,end_time:null,expired:null,label:null,labelDiv:null,refid:null,running:null,started:null,time_remaining:null,reload_when_expired:null,was_unexpired_once:null,start:function(){if(this.started)return false;this.started=true;this.end_time=Date.now()+this.time_remaining*1000;this.displayDiv=DOM.find(this.elem,'div.HackerCupTimer_display');if(!this.running){if(this.label){this.labelDiv=DOM.find(this.elem,'div.HackerCupTimer_label');DOM.setContent(this.labelDiv,this.label);}this._runTimer();}this.running=true;return false;},_onInform:function(a,b){if(b.problem_id==this.refid)this.start();},_runTimer:function(){if(!this.started)return false;var a,b,c=Date.now(),d=Math.round((this.end_time-c)/1000);if(d>=0){var e=d,f=e%60;e=parseInt(e/60,10);var g=e%60;e=parseInt(e/60,10);if(f<10)f='0'+f;if(g<10)g='0'+g;b=[];if(e)b.push(e);b.push(g);b.push(f);a=b.join(':');this.was_unexpired_once=true;}else{a=this.expired;if(this.reload_when_expired&&this.was_unexpired_once)window.location.reload();}DOM.setContent(this.displayDiv,a);setTimeout(this._runTimer.bind(this),1000);return false;}});
function downloadInput(a,b){Form.post(URI('/ajax/hackercup/input'),{pid:a});}
window.HackerCup={complete:function(a){DOM.setContent($('hackercup_submit_controls'),a);CSS.removeClass('hackercup_submit','async_saving');Arbiter.inform(HackerCupConst.SUCCESSFUL_UPLOAD,{});},incomplete:function(a){DOM.setContent($('hackercup_submit_message'),a);CSS.removeClass('hackercup_submit','async_saving');}};